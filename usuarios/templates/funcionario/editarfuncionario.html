{% extends "containers/mainContainer.html" %}
{% load static %}
{% block title %}
    Funcion치rios
{% endblock title %}
{% block containerTitle %}
    Funcion치rios/detalhes
{% endblock containerTitle %}
{% block container %}
    <form method="post" enctype="multipart/form-data" class="w-full">
        {% csrf_token %}
        {% include 'components/message.html' %}
        <div class="flex gap-8 w-full">
            <div class="flex flex-col justify-end gap-4 w-full">
                <div class="flex gap-4 h-36">
                    <img src="{% if imagem %}{{ imagem.url }}{% else %}{% static 'img/blank-profile.webp' %}{% endif %}"
                         alt="Imagem do funcion치rio"
                         width="128px"
                         height="128px"
                         id="preview-imagem"
                         class="h-32 w-32 rounded-full object-cover object-top"/>
                    <div class="flex items-center gap-4">
                        <p class="text-primaryColor font-medium">Fazer upload de imagem</p>
                        <label class="relative cursor-pointer bg-primaryColor hover:bg-onPrimaryFixedVariant focus:bg-primaryColor border border-primaryColor text-white rounded-md py-2 px-4 inline-flex items-center" for="id_imagem">Escolher Imagem
                            <input type="file"
                                   name="imagem"
                                   id="id_imagem"
                                   accept="{{ imagem }}"
                                   onchange="previewImagem(this)"
                                   class="hidden"
                                   value="{{ imagem }}">
                        </label>
                    </div>
                </div>
                <label for="{{ form.nomecompleto.id_for_label }}">{{ form.nome_completo.label }}:</label>
                {% include "components/input.html" with type=form.nome_completo.field.widget.input_type label=form.nome_completo.label name=form.nome_completo.name id=form.nome_completo.id_for_label value=form.nome_completo.value %}
                {% include "components/input.html" with acao='disabled' type='text' label='Documento' name='id_documento' value=object.get_documento_formatado.1 %}
                {% include "components/input.html" with acao='disabled' type='text' label='E-mail' name=object.email value=object.email %}
                {% include "components/input.html" with type=form.telefone.field.widget.input_type label=form.telefone.label name=form.telefone.name id=form.telefone.id_for_label value=form.telefone.value %}
                {% include "components/oneselect.html" with label=form.funcao.label name=form.funcao.name id=form.funcao.id_for_label options=form.funcao.field.choices text=cargo %}
                {% include "components/oneselect.html" with label=form.turno.label name=form.turno.name id=form.turno.id_for_label options=form.turno.field.choices text=turno %}
            </div>
            <div class="flex flex-col justify-end gap-4 w-full">
                {% include "components/input.html" with type=form.cep.field.widget.input_type label=form.cep.label name=form.cep.name id=form.cep.id_for_label value=object.endereco.cep %}
                {% include "components/input.html" with type=form.estado.field.widget.input_type label=form.estado.label name=form.estado.name id=form.estado.id_for_label value=object.endereco.estado %}
                {% include "components/input.html" with type=form.cidade.field.widget.input_type label=form.cidade.label name=form.cidade.name id=form.cidade.id_for_label value=object.endereco.cidade %}
                {% include "components/input.html" with type=form.bairro.field.widget.input_type label=form.bairro.label name=form.bairro.name id=form.bairro.id_for_label value=object.endereco.bairro %}
                {% include "components/input.html" with type=form.rua.field.widget.input_type label=form.rua.label name=form.rua.name id=form.rua.id_for_label value=object.endereco.rua %}
                {% include "components/input.html" with type=form.numero.field.widget.input_type label=form.numero.label name=form.numero.name id=form.numero.id_for_label value=object.endereco.numero %}
                {% include "components/input.html" with type=form.complemento.field.widget.input_type label=form.complemento.label name=form.complemento.name id=form.complemento.id_for_label value=object.endereco.complemento %}
            </div>
        </div>
        <div class="w-full py-10 flex items-center justify-end gap-8">
            {% include "components/anchor.html" with secondary='True' href="usuarios:verfuncionario" pk=object.id label="Cancelar" %}
            {% include "components/button.html" with  type='submit' label="Editar Funcion치rio" %}
        </div>
    </form>

    <script>
        function previewImagem(input) {
            var preview = document.getElementById('preview-imagem');
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    preview.src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
{% endblock container %}
