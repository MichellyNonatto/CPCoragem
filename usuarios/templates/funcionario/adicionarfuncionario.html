{% extends "containers/mainContainer.html" %}
{% load static %}
{% block title %}
    Funcionários
{% endblock title %}
{% block containerTitle %}
    Funcionários/adicionar
{% endblock containerTitle %}
{% block container %}
    <form method="post" enctype="multipart/form-data" class="w-full">
        {% csrf_token %}
        <div class="flex gap-8 w-full">
            <div class="flex flex-col justify-end gap-4 w-full">
                <div class="flex gap-4 h-36">
                    <img src="{% if object.imagem.url %}{{ object.imagem.url }}{% else %}{% static 'img/blank-profile.webp' %}{% endif %}"
                         alt="Imagem do funcionário"
                         width="128px"
                         height="128px"
                         id="preview-imagem"
                         class="h-32 w-32 rounded-full object-cover object-top" />
                    <div class="flex items-center gap-4">
                        <p class="text-primaryColor font-medium">Fazer upload de imagem</p>
                        <label for="id_imagem"
                               class="relative cursor-pointer bg-primaryColor hover:bg-onPrimaryFixedVariant focus:bg-primaryColor border border-primaryColor text-white rounded-md py-2 px-4 inline-flex items-center">
                            <span>Escolher Imagem</span>
                            <input type="file"
                                   name="imagem"
                                   id="id_imagem"
                                   accept="image/*"
                                   required
                                   onchange="previewImagem(this)"
                                   class="hidden">
                        </label>
                    </div>
                </div>
                <script>
                function previewImagem(input) {
                    var preview = document.getElementById('preview-imagem');
                    if (input.files && input.files[0]) {
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            preview.src = e.target.result;
                        }
                        reader.readAsDataURL(input.files[0]);
                    }
                }
                </script>
                {% include "components/input.html" with acao=acao type="text" label="Nome completo" name="nome_completo" id="id_nome_completo" value=form.nome_completo.value erro=form.nome_completo.errors %}
                {% include "components/input.html" with acao=acao type="text" label="Documento" name="documento" id="id_documento" value=form.documento.value erro=form.documento.errors %}
                {% include "components/input.html" with acao=acao type="number" label="Telefone" name="telefone" id="id_telefone" value=form.telefone.value erro=form.telefone.errors %}
                {% include "components/select.html" with name=form.funcao.name selected_value=form.funcao.value id=form.funcao.id_for_label label="Função" options=form.funcao.field.choices erro=form.funcao.errors %}
                {% include "components/select.html" with name=form.turno.name selected_value=form.turno.value id=form.turno.id_for_label label="Turno" options=form.turno.field.choices erro=form.turno.errors %}
            </div>
            <div class="flex flex-col justify-end gap-4 w-full">
                {% include "components/input.html" with acao=acao type="text" label="CEP" name="cep" id="id_cep" value=form.cep.value erro=form.cep.errors %}
                {% include "components/input.html" with acao=acao type="text" label="Estado" name="estado" id="id_estado" value=form.estado.value erro=form.estado.errors %}
                {% include "components/input.html" with acao=acao type="text" label="Cidade" name="cidade" id="id_cidade" value=form.cidade.value erro=form.cidade.errors %}
                {% include "components/input.html" with acao=acao type="text" label="Bairro" name="bairro" id="id_bairro" value=form.bairro.value erro=form.bairro.errors %}
                {% include "components/input.html" with acao=acao type="text" label="Rua" name="rua" id="id_rua" value=form.rua.value erro=form.rua.errors %}
                {% include "components/input.html" with acao=acao type="text" label="Número" name="numero" id="id_numero" value=form.numero.value erro=form.numero.errors %}
                {% include "components/input.html" with acao=acao type="text" label="Complemento" name="complemento" id="id_complemento" value=form.complemento.value erro=form.complemento.errors %}
            </div>
        </div>
        <div class="w-full py-10 flex items-center justify-end gap-8">
            {% include "components/button.html" with secondary=True onclick="javascript:history.go(-1);" label="Cancelar" %}
            {% include "components/button.html" with type="submit" label="Cadastrar funcionário" %}
        </div>
    </form>
{% endblock container %}
{% comment %} {% extends 'index.html' %}
{% load static %}
{% block title %}Adicionar Funcionário{% endblock %}
{% block content %}
    <nav>
        <ul>
            <li>
                <a href="{% url 'usuarios:listafuncionarios' %}">Funcionários</a>
            </li>
        </ul>
    </nav>
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li {% if message.tags %}class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <fieldset>
            <legend>Adicionar Funcionário</legend>
            {{ form.as_p }}
        </fieldset>
        <div>
            <button type="submit">Cadastrar</button>
            <a href="{% url 'usuarios:listafuncionarios' %}">
                <button type="button">Cancelar</button>
            </a>
        </div>
    </form>
{% endblock %} {% endcomment %}
